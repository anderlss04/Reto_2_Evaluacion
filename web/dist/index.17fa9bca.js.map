{"mappings":"AAAA,eAAe,cAAc;IACzB,IAAI;QACA,IAAI,OAAO,SAAS,aAAa,CAAC,SAAS,KAAK;QAChD,IAAI,QAAQ,SAAS,aAAa,CAAC,UAAU,KAAK;QAClD,IAAI,QAAQ,SAAS,aAAa,CAAC,UAAU,KAAK;QAClD,IAAI,SAAS,SAAS,aAAa,CAAC,SAAS,KAAK;QAElD,IAAI,YAAY,IAAI;QACpB,UAAU,MAAM,CAAC,gBAAgB;QAEjC,IAAI,aAAa,IAAI;QACrB,WAAW,MAAM,CAAC,QAAQ;QAC1B,WAAW,MAAM,CAAC,SAAS;QAC3B,WAAW,MAAM,CAAC,YAAY;QAC9B,WAAW,MAAM,CAAC,yBAAyB;QAE3C,IAAI,iBAAiB;YACjB,QAAQ;YACR,SAAS;YACT,MAAM;YACN,QAAQ,YAAY,OAAO,CAAC;QAChC;QAEA,MAAM,WAAW,MAAM,MAAM,iCAAiC;QAC9D,IAAI,SAAS,MAAM,KAAK,KAAK;YACzB,MAAM;YACN,OAAO;QACX,OACI,MAAM,IAAI,MAAM,CAAC,oCAAoC,EAAE,SAAS,MAAM,CAAC,CAAC,EAAE;IAElF,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC;QACd,MAAM;IACV;AACJ;AAEA,eAAe,WAAW;IACtB,IAAI;QACA,IAAI,OAAO,SAAS,aAAa,CAAC,SAAS,KAAK;QAChD,IAAI,QAAQ,SAAS,aAAa,CAAC,UAAU,KAAK;QAGlD,IAAI,YAAY,IAAI;QACpB,UAAU,MAAM,CAAC,gBAAgB;QAEjC,IAAI,aAAa,IAAI;QACrB,WAAW,MAAM,CAAC,SAAS;QAC3B,WAAW,MAAM,CAAC,YAAY;QAE9B,IAAI,iBAAiB;YACjB,QAAQ;YACR,SAAS;YACT,MAAM;YACN,QAAQ,YAAY,OAAO,CAAC;QAChC;QAEA,MAAM,WAAW,MAAM,MAAM,8BAA8B;QAC3D,IAAI,SAAS,MAAM,KAAK,KAAK;YACzB,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,UAAU,SAAS,KAAK,KAAK,EAAE;YAC/B,SAAS,MAAM;QACnB,OACI,MAAM,IAAI,MAAM,CAAC,oCAAoC,EAAE,SAAS,MAAM,CAAC,CAAC,EAAE;IAElF,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC;QACd,MAAM;IACV;AACJ;AAEA,eAAe,YAAY;IACvB,IAAI;QACA,IAAI,YAAY,IAAI;QACpB,UAAU,MAAM,CAAC,iBAAiB,YAAY,UAAU;QAGxD,IAAI,iBAAiB;YACjB,QAAQ;YACR,SAAS;YACT,QAAQ,YAAY,OAAO,CAAC;QAChC;QAEA,MAAM,WAAW,MAAM,MAAM,+BAA+B;QAC5D,IAAI,SAAS,MAAM,KAAK,KAAK;YACzB,cAAc;YACd,QAAQ,GAAG,CAAC;YACZ,SAAS,MAAM;QACnB,OACI,MAAM,IAAI,MAAM,CAAC,oCAAoC,EAAE,SAAS,MAAM,CAAC,CAAC,EAAE;IAElF,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC;IAClB;AACJ;AAEA,eAAe,cAAc,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE;IAEhD,IAAI,QAAQ;IAEZ,SAAS,GAAG,CAAC,CAAC,UAAY;QACtB,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;IACpC;IAEA,IAAI,OACA,SAAS,CAAC,MAAM,EAAE,MAAM,CAAC;IAG7B,IAAI,QAAQ,IAAI,IAAI,QAAQ,WACxB,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC;IAG5B,IAAI,YAAY,IAAI;IACpB,UAAU,MAAM,CAAC,iBAAiB,CAAC,OAAO,EAAE,UAAU,SAAS,CAAC;IAEhE,IAAI,iBAAiB;QACjB,QAAQ;QACR,SAAS;QACT,QAAQ,YAAY,OAAO,CAAC;IAChC;IAEA,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,CAAC,8BAA8B,EAAE,MAAM,CAAC,EAAE;QACvE,IAAI,SAAS,MAAM,KAAK,KACpB,MAAM,IAAI,MAAM,CAAC,oCAAoC,EAAE,SAAS,MAAM,CAAC,CAAC,EAAE;QAG9E,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,OAAO;IACP,eAAe;IACnB,EAAE,OAAO,OAAO;QACZ,6EAA6E;QAC7E,QAAQ,KAAK,CAAC,6DAAwD;IACtE,wBAAwB;IAC5B;AACJ","sources":["OneDrive/Documentos/escuela/2DAW3/proyecto_2evaluacion/web/src/js/api.js"],"sourcesContent":["async function apiRegistro() {\r\n    try {\r\n        var pass = document.querySelector('#pass').value;\r\n        var pass2 = document.querySelector('#pass2').value;\r\n        var email = document.querySelector('#email').value;\r\n        var nombre = document.querySelector('#name').value;\r\n\r\n        var myHeaders = new Headers();\r\n        myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\r\n        var urlencoded = new URLSearchParams();\r\n        urlencoded.append(\"name\", nombre);\r\n        urlencoded.append(\"email\", email);\r\n        urlencoded.append(\"password\", pass);\r\n        urlencoded.append(\"password_confirmation\", pass2);\r\n\r\n        var requestOptions = {\r\n            method: 'POST',\r\n            headers: myHeaders,\r\n            body: urlencoded,\r\n            signal: AbortSignal.timeout(10000)\r\n        };\r\n\r\n        const response = await fetch(\"http://localhost/api/register\", requestOptions);\r\n        if (response.status === 200) {\r\n            alert(\"Usuario creado exitosamente\");\r\n            router('login')\r\n        } else {\r\n            throw new Error(`Error en la respuesta del servidor: ${response.status}`);\r\n        }\r\n    } catch (error) {\r\n        console.error(error);\r\n        alert('Error, verifica tus datos e intenta nuevamente');\r\n    }\r\n}\r\n\r\nasync function apiLogin() {\r\n    try {\r\n        var pass = document.querySelector('#pass').value;\r\n        var email = document.querySelector('#email').value;\r\n\r\n\r\n        var myHeaders = new Headers();\r\n        myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\r\n        var urlencoded = new URLSearchParams();\r\n        urlencoded.append(\"email\", email);\r\n        urlencoded.append(\"password\", pass);\r\n\r\n        var requestOptions = {\r\n            method: 'POST',\r\n            headers: myHeaders,\r\n            body: urlencoded,\r\n            signal: AbortSignal.timeout(10000)\r\n        };\r\n\r\n        const response = await fetch(\"http://localhost/api/login\", requestOptions)\r\n        if (response.status === 200) {\r\n            const json = await response.json();\r\n            setCookie('token', json.token, 20);\r\n            location.reload()\r\n        } else {\r\n            throw new Error(`Error en la respuesta del servidor: ${response.status}`);\r\n        }\r\n    } catch (error) {\r\n        console.error(error);\r\n        alert('Error, verifica tus datos e intenta nuevamente');\r\n    }\r\n}\r\n\r\nasync function apiLogout() {\r\n    try {\r\n        var myHeaders = new Headers();\r\n        myHeaders.append(\"Authorization\", \"Bearer \" + getCookie('token'));\r\n\r\n\r\n        var requestOptions = {\r\n            method: 'POST',\r\n            headers: myHeaders,\r\n            signal: AbortSignal.timeout(10000)\r\n        };\r\n\r\n        const response = await fetch(\"http://localhost/api/logout\", requestOptions);\r\n        if (response.status === 200) {\r\n            borrarCoockie('token');\r\n            console.log('Sesión cerrada exitosamente');\r\n            location.reload();\r\n        } else {\r\n            throw new Error(`Error en la respuesta del servidor: ${response.status}`);\r\n        }\r\n    } catch (error) {\r\n        console.error(error);\r\n    }\r\n}\r\n\r\nasync function apiPeticiones(empresas, fecha, hora) {\r\n\r\n    let query = '';\r\n\r\n    empresas.map((empresa) => {\r\n        query += `empresa[]=${empresa}&`\r\n    });\r\n\r\n    if (fecha) {\r\n        query += `fecha=${fecha}`;\r\n    }\r\n\r\n    if (hora != null || hora != undefined) {\r\n        query += `&hora=${hora}`;\r\n    }\r\n\r\n    let myHeaders = new Headers();\r\n    myHeaders.append(\"Authorization\", `Bearer ${getCookie('token')}`);\r\n\r\n    let requestOptions = {\r\n        method: 'GET',\r\n        headers: myHeaders,\r\n        signal: AbortSignal.timeout(10000),\r\n    };\r\n\r\n    try {\r\n        const response = await fetch(`http://localhost/api/empresas?${query}`, requestOptions);\r\n        if (response.status !== 200) {\r\n            throw new Error(`Error en la respuesta del servidor: ${response.status}`);\r\n        }\r\n\r\n        const json = await response.json();\r\n\r\n        return json;\r\n        // return data;\r\n    } catch (error) {\r\n        // throw new Error(`Error en la respuesta del servidor: ${response.status}`);\r\n        console.error(\"ERROR: Ha ocurrido un error al realizar la petición. \"+error);\r\n        // console.error(error);\r\n    }\r\n}\r\n"],"names":[],"version":3,"file":"index.17fa9bca.js.map","sourceRoot":"/__parcel_source_root/"}